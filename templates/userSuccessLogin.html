<!DOCTYPE html>
<html>
<head>
	<title>EVM</title>
	
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
<!--	<meta name="viewport" content="width=device-width, initial-scale=1.0">-->


	<style type="text/css">
		body {
			margin: 0px;
			background: #4b6cb7;
		background: linear-gradient(to right, #182848, #4b6cb7);

		}
		.user-name{
			float: left;
			width: 20vw;
			height: 10vh;
			margin-top: 1vh;
	  	    color: white;
		}
		.head {
			position: absolute;
			width: 50vw;
			height: 10vh;
			margin-top: 1vh;
			margin-left: 25%;
			text-align: center;
			font-size: 2em;
	  	    color: white;
	  	    line-height: 10vh;			
		}
		.content {
			text-align: center;
			line-height: 10vh;
			font-size: 2.4em;
		}
		.logout {
			float: right;
			width: 20vw;
			height: 10vh;
			margin-top: 1vh;
	  	    color: white;
		}
		button {
            height: 45px;
            background: transparent;
            outline: none;
            width: 10vw;
            border-radius: 30px;
            border: none;
            box-shadow: 0 15px 30px 0 rgba(189,89,215,0.25);
            text-align: center;
            background-color: #fff;
            margin-left: 26%;
            margin-top: 4%;
            cursor: pointer;
        }

        .main-body {
        	width:100%;
        	height: 88vh;
        	background: #6392ff;
        	margin: auto auto;
        	position: absolute;
        	margin-top: 12vh;
        	color:white;
        	/*margin-left: 14.5%;*/
        	box-shadow: 0 8px 18px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        }

        .grid-container {
        	display: grid;
        	grid-template-columns: auto auto auto;
        	grid-gap: 0px;
        	border: 1px solid;
        	border-bottom-left-radius: 40px;
        	border-top-right-radius: 40px;
        	width: 60vw;
        	margin: auto auto;
        	margin-top: 60px;
    	    box-shadow: 0 8px 18px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);


        }

        .grid-item {
        	text-align: center;
        	font-size: 1.5em;
        	padding-top: 15px;
        	padding: 10px;
        	border-bottom: 1px solid;

        }

        img {
        	width: 5vw;
        	height: 5vw;
        	border-radius: 50%; 
        }

        .last-row {
        	border-bottom: 0px solid;
        }

        .align {
        	margin-top: 20px;
        }
        #popup {
             display: none;
        	 width: 300px;
             border-radius: 25px; 
             top:50%;
             left:50%;
             transform: translate(-50%,-50%);
             height: 162px;
             box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
             position: absolute;
             z-index: 20;
             background-color: #f2f3f4;
         }
         .confirmbtn{
            height: 50px;
            text-align: center;
            width: 150px;
            line-height: 50px;
            margin-top: -20px;
            border-radius: 20px;
            display: inline-block;
            margin-bottom: 0%;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);

         }
         .confirmbtn:hover{
                background-color: #1574C5;
         }
         #ok,#cancel{
         	height: 40px;
         	width: 300px;
         	text-align: center;
         	line-height: 40px;
         	border-radius: 30px;
         	margin-top: -1vh;
         }
        #ok:hover,#cancel:hover{
                background-color: #1574C5;
         }

		.btn-2 .round {
		  background-color: #00c4eb;
		}
		.last-row {
			margin-top: -4px;

		}

		a {
		  text-decoration: none;
		  -moz-border-radius: 30px;
		  -webkit-border-radius: 30px;
		  border-radius: 30px;
		  padding: 12px 53px 12px 23px;
		  color: #fff;
		  text-transform: uppercase;
		  font-family: sans-serif;
		  font-weight: bold;
		  position: relative;
		  -moz-transition: all 0.3s;
		  -o-transition: all 0.3s;
		  -webkit-transition: all 0.3s;
		  transition: all 0.3s;
		  display: inline-block;
		  cursor: pointer;
		  margin-top: 10px;
		}
		a span {
		  position: relative;
		  z-index: 30;
		}
		a .round {
		  -moz-border-radius: 50%;
		  -webkit-border-radius: 50%;
		  border-radius: 50%;
		  width: 38px;
		  height: 45px;
		  position: absolute;
		  right: 3px;
		  top: 3px;
		  -moz-transition: all 0.3s ease-out;
		  -o-transition: all 0.3s ease-out;
		  -webkit-transition: all 0.3s ease-out;
		  transition: all 0.3s ease-out;
		  z-index: 0;
		}

		a .round i {
		  position: absolute;
		  top: 50%;
		  margin-top: -6px;
		  left: 50%;
		  margin-left: -4px;
		  -moz-transition: all 0.3s;
		  -o-transition: all 0.3s;
		  -webkit-transition: all 0.3s;
		  transition: all 0.3s;
		}
		.txt {
		  font-size: 17px;
		  line-height: 1.6;
		}
		.type-1 a:hover {
		  padding-left: 48px;
		  padding-right: 28px;
		}
		.type-1 a:hover .round {
		  width: calc(100% - 6px);
		  -moz-border-radius: 30px;
		  -webkit-border-radius: 30px;
		  border-radius: 30px;
		}
		.type-1 a:hover .round i {
		  left: 12%;
		}
        #spinBox {
	    z-index:999;
	    opacity:1;
	    display:none;
	  
	    width:1em;
	    height:1em;
	    margin: -2.5em 0 0 -2.5em;
	    /*background-color:#f0f3f6;
	    border:1px solid #cdcdcd;*/
	    
	    position:fixed;
	    top:50%;
	    left:50%
	  }
	</style>
</head>
<body>

<div id="whole">
	<div>
		<div class="user-name">
			<div class="content" id="name"><b style="color:#d8daff"></b></div>
		</div>

		<div class="head">
			<b style="color:#d8daff">Government Of Ram Mandir</b>
		</div>

		<div class="logout">
			<form action="{{url_for('logout')}}" method="POST" oninvalid="false">
				<button><b style="color:#aeb1ef;font-size: 20px;">Log Out</b></button>
			</form>
		</div>
	</div>

	<div class="main-body">
		<div class="grid-container">
			

			<!-- 1st ROW -->
			<div class="grid-item">
				Party Symbol
			</div>
			<div class="grid-item">
				Party Name
			</div>

			<div class="grid-item">
				Vote
			</div>	

			<!-- 2nd ROW -->
			<div class="grid-item">
				<img src="../static/images/bhajpa.jpg">
			</div>

			<div class="grid-item align">
				BJP
			</div>

			<div class="grid-item">
				<div id="bjp" class="type-1">
				  <div>
				    <a class="btn btn-2">
				      <span class="txt" value="BJP">VOTE ME</span>
				      <span class="round"><i class="fa fa-chevron-right" style="margin-top: -10px"></i></span>
				    </a>
				  </div>
				 </div>
			</div>	

			<!-- 3rd ROW -->
			<div class="grid-item">
				<img src="../static/images/nota.jpg">
			</div>

			<div class="grid-item align">
				Nota
			</div>

			<div class="grid-item">
				<div id="nota" class="type-1">
				  <div>
				    <a class="btn btn-2">
				      <span class="txt" value="Nota">VOTE ME</span>
				      <span class="round"><i class="fa fa-chevron-right" style="margin-top: -10px"></i></span>
				    </a>
				  </div>
				 </div>
			</div>	
				

			<!-- 3rd ROW -->
			<div class="grid-item">
				<img src="../static/images/congress.png">
			</div>

			<div class="grid-item align">
				Congress
			</div>

			<div class="grid-item">
				<div id="cong" class="type-1">
				 <div>
				    <a class="btn btn-2">
				      <span class="txt" value="Congress">VOTE ME</span>
				      <span class="round"><i class="fa fa-chevron-right" style="margin-top: -10px"></i></span>
				    </a>
				  </div>
				 </div>
			</div>	

			<!-- 3rd ROW -->
			<div class="grid-item last-row">
				<img src="../static/images/sena.jpg">
			</div>

			<div class="grid-item align" style="border-bottom: 0px solid;">
				Sena
			</div>

			<div class="grid-item align last-row">
				<div id="sena" class="type-1">
				  <div>
				    <a class="btn btn-2">
				      <span class="txt" value="Sena">VOTE ME</span>
				      <span class="round"><i class="fa fa-chevron-right" style="margin-top: -10px"></i></span>
				    </a>
				  </div>
				 </div>
			</div>	
		</div>
		<span class="output"></span>
		<!-- <i class="fa fa-spinner fa-spin" style="font-size:48px;color:blue"></i> -->

</div>
		<div id="spinBox" style="opacity: 1"><img src="../static/images/spinner.gif"></div>
</div>
	<div id="popup"><h3 style="text-align: center;padding-top: 10px">Are you sure ?</h3>
        <div style="display: flex;padding-top: 59.7px">    
            <div id="cancel" class="confirmbtn"><b>Cancel</b></div>
            <div id="ok" class="confirmbtn"><b>Ok</b></div>
        </div>    
    </div>

	<script type="text/javascript">

		var a='329876dd';
		var name = Cookies.get("name");
		$("div#name").html(name);

		$(document).ready(function(){
			var name = Cookies.get("name");
		$("div#name").html(name);
                $(".type-1").click(function () {
                	party = $(this).attr('id');
                	$("#whole").css({'opacity':'0.1','pointer-events': 'none'
                });
                	// console.log($(this))
                    $("#popup").css("display", "block");
                    $("#whole").css({'opacity':'0.1','pointer-events': 'none'
                });
                })
                $("#cancel").click(function(){
                    $("#popup").css("display", "none");
                    $("#whole").css({'opacity':'1','pointer-events': 'auto'
                });
                });
              	$("#ok").click(function() {
              	$('#spinBox').show();
              	$("#popup").css("display", "none");
                    $("#whole").css({'opacity':'.1','pointer-events': 'none'
                });
    	    	
	    	    var id = Cookies.get("persis_id")
	    	    var userVote = {'vote' : party, 'persis_id' : id};
	    	    console.log(userVote);
	            
	            $.ajax({
	            type: 'POST',
	            url: "http://"+a+".ngrok.io/vote",
                contentType: 'application/json',
	            data : JSON.stringify(userVote),
	            
	            success: function(result) {
	            	if(typeof(result) == "string"){
	            		$("span.output").html(result);
					}
	            	else{
						$('body').html(result);
					}
					 $('#spinBox').hide();
                	 $("#whole").css({'opacity':'1','pointer-events': 'auto'});
	            }
	        });
	     });
	    });  


</script> 
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
</body>
</html>