
<html>
<head>

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    	<link rel="stylesheet" type="text/css" href="../static/css/demo.css" />
		<link rel="stylesheet" type="text/css" href="../static/css/set1.css" />
		<link rel="stylesheet" type="text/css" href="../static/css/normalize.css" />
	<title></title>
	<style type="text/css">

	.header {
		width:100%;
		height: 12vh;
/*		background-color: #fff;*/
		background-color: #d18a70;
	}
		
	#list_item1, #list_item2 {
		width: 22vw;
		height: 6vh;
	}

	.main-body {
		margin: 2vw;
		display: grid;
		grid-template-columns: auto auto;
	}

	.grid-item {
		text-align: center;
	}

	.mid-content {
		margin: 5vw;
		margin-top: 3vw;
	}

	#cont {
	  margin: 2vw;
	  border-collapse: collapse;
	  width: 50%;
	  display: none;
	  margin: auto auto;
	}

	#cont td, #cont th {
	  border: 1px solid #ddd;
	  padding: 8px;
	  
	}

	#cont tr:nth-child(even){background-color: #f2f2f2;}

	#cont tr:hover {background-color: #ddd;}

	#cont th {
	  padding-top: 12px;
	  padding-bottom: 12px;
	  text-align: center;
	  background-color: #d18a70;
	  color: white;
	}

	button {
            height: 50px;
            background: transparent;
            outline: none;
            width: 10vw;
            border-radius: 30px;
            border: none;
            box-shadow: 0 15px 30px 0 rgba(189,89,215,0.25);
            text-align: center;
            background-color: #d18a70;
            color : white;
        }

    #submit2 {
    	background-color: #fff;
    	color: black;
    }


	</style>

</head>
<body>


 <div class="header">

 	<i class="material-icons prefix">account_box</i>
 	
 	Admin

	<form align="right" name="form1" method="post" action="">

		  <label class="logoutLblPos">

		  <button id="submit2">log out</button>

		  </label>

	</form>

 </div>


	<form>
		<div class="main-body">

			<div class="grid-item">

				<input type="text" id="list_item1" name = "txt1" placeholder="Enter city name" name="city" autocomplete="on">
				
				<button id="additem" type="button">Add City</button>
			
			</div>

			<div class="grid-item">

				<input type="text" id="list_item2" name = "txt2" placeholder="Enter city name" name="rem_city" autocomplete="on">
				<button id="removeitem" type="button">Remove City</button>

			</div>

		</div>

	</form>

		<br><br><br><br><br>

		<div class="main-body">

			<div class = "grid-item mid-content">

				<button id="show-btn" onclick="result()">Show item:</button>

				<div id="output"></div>

			</div>

			<div class="mid-content grid-item">
				<button id="clear-btn" onclick="aler()">Clear All</button>
			</div>
		</div>

					<table id="cont" border="1px" style="border-collapse: collapse;">
						<tr>
							<th>Index</th>
							<th>Place</th>
						</tr>	
					</table>

		
	<script type="text/javascript">

//	window.location.hash="no-back-button";
//	window.location.hash="Again-No-back-button";
//	window.onhashchange=function(){window.location.hash="no-back-button";}

var a ='6af9a9db'

		// function aler() {
		// 	alert("Are you sure?");
		// }

	$(document).ready(function() {
	    $("#additem").click(function() {
	    	    var value = $("#list_item1").val();
	    	    place = {'place' : value};
	    	    console.log(place);
	           $.ajax({
	            type: 'POST',
	            url: "http://"+a+".ngrok.io/addElecPlace",
                contentType: 'application/json',
	            data : JSON.stringify(place),
	            success: function(result) {
	               document.getElementById("output").innerHTML = result;
	            }
	        });
	    });
	    $("#show-btn").click(function(){
	    	
	    	$.ajax({
	            type: 'GET',
	            url: "http://"+a+".ngrok.io/showElecPlace",
                contentType: 'JSON',
                // headers: {'x-my-custom-header':'mc'},
	            success: function(result) {
	            	$("#cont").show();
	            		var disp =document.getElementById("cont")
	            		var x = document.getElementById("cont").rows.length;
	            	if(x<=1) {

		            	for(var i = 0 ; i < result.length ; i++) {
			            	var tr = document.createElement('tr');
						    var td = tr.appendChild(document.createElement('td'));
						    td.innerHTML = i+1;
						    var td = tr.appendChild(document.createElement('td'));
						    td.innerHTML = result[i]['placeName'];
						    disp.appendChild(tr);
		            	}
		            }
		            else {
		            	for(var i = 0 ; i < x-1 ; i++) {
			            	document.getElementById("cont").deleteRow(i+1);	
			            }
			            for(var i = 0 ; i < result.length ; i++) {
			            	var tr = document.createElement('tr');
						    var td = tr.appendChild(document.createElement('td'));
						    td.innerHTML = i+1;
						    var td = tr.appendChild(document.createElement('td'));
						    td.innerHTML = result[i]['placeName'];
						    disp.appendChild(tr);
		            	}}}
	            }
	        );
	    })
	    $("#removeitem").click(function(){
	    	var value = $("#list_item2").val();
	    	place = {'place' : value};
	    	$.ajax({
	            type: 'POST',
	            url: "http://"+a+".ngrok.io/remElecPlace",
                contentType: 'application/JSON',
                data: JSON.stringify(place),
                // headers: {'x-my-custom-header':'mc'},
	            success: function(result) {
	            	document.getElementById("output").innerHTML=result;
	            }
	    })
	});
	    $("#clear-btn").click(function(){
	    	$.ajax({
	            type: 'POST',
	            url: "http://"+a+".ngrok.io/clearPlace",
                contentType: 'application/JSON',
                // data: JSON.stringify(place),
                // headers: {'x-my-custom-header':'mc'},
	            success: function(result) {
	            	document.getElementById("output").innerHTML=result;
	            }
	    })
	});

})


	function activatePlacesSearch() {
		var input = document.getElementById("list_item1");
		var autocomplete = new google.maps.places.Autocomplete(input);

		var input2 = document.getElementById("list_item2");
		var autocomplete = new google.maps.places.Autocomplete(input2);
	}



</script>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkqBEmy8wmdJeUwjwUTUiBCieJ6o4LYNI&libraries=places&region=in&callback=activatePlacesSearch"></script>
</body>
</html>
