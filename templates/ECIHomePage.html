
<html>
<head>

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

	<link rel="stylesheet" type="text/css" href="../static/css/demo.css" />
	<link rel="stylesheet" type="text/css" href="../static/css/set1.css" />
	<link rel="stylesheet" type="text/css" href="../static/css/normalize.css" />
	<title></title>

	<style type="text/css">
	body{
		background: #000428;
		background: linear-gradient(to right, #004e92, #000428);

	}
	.header {
		width:100%;
		height: 8vh;
		background: #0f0c29;
		background: linear-gradient(to right, #24243e, #302b63, #0f0c29);

	}
		
	#list_item1, #list_item2 {
		width: 22vw;
		height: 6vh;
	}


	#cont {
	  margin: 2vw;
	  border-collapse: collapse;
	  width: 50%;
	  margin: auto auto;
	}

	#cont td, #cont th {
	  border: 1px solid #ddd;
	  padding: 8px;
	  
	}

	#cont tr:nth-child(even){background-color: #f2eaea;}

	#cont tr:hover {background-color: #ddd;}

	#cont th {
	  padding-top: 12px;
	  padding-bottom: 12px;
	  text-align: center;
	  background-color: #ce7797;
	  color: white;
	}

	button {
            height: 46px;
            background: transparent;
            outline: none;
            width: 8vw;
            border-top-right-radius: 20px;
            border-bottom-right-radius: 20px;
            border: none;
            box-shadow: 0 5px 10px 0 rgba(189,89,215,0.25);
            text-align: center;
            background-color: #2948ff;
            color : white;
            margin-left: -10px;
        }
    #additem,#removeitem{
		border-top-right-radius: 30px;
        border-bottom-right-radius: 30px;
        background: rgba(0,194,162,1);
    }
    #removeitem{
    	background-color: #c9404c
    }

    #whole {
    	position: relative;
    }

    input {
            height: 50px;
            width: 20vw;
            border-top-left-radius: 30px;
            border-bottom-left-radius: 30px;
            border: none;
            box-shadow: 0 2px 10px 0 rgba(0,0,0,0.11);
            text-align: center;
            font-size: 15px;
            color : #4c2a52;
            outline: none;
        }

		#show-btn,#clear-btn{
			border-top-left-radius: 20px;
			border-bottom-right-radius: :20px;
			border-top-right-radius: 0px;
			border-bottom-left-radius :0px;
			background: #1261ea;
        	border:2px solid #4e54c8;

		}
		#clear-btn{
			background: #CB356B;
        	border:2px solid #BD3F32;
		}

		.city {
			margin-top: 80px;
			margin-left: 50px;
		}

		.rem-city {
			margin-top: 30vh;
		}
		.buttons {
			position: absolute;
			margin-top: -350px;
		}
		.shw-btn {
			margin-left: 60vw;
			margin-top: -10vh;
		}
		.clr-btn {
			margin-left: 80vw;
			margin-top: -6vh;
		}

		#submit2 {
			float: right;
			margin-top: 1.1vh;
			margin-right: 10px;
			border-radius: 25px;
			width: 20vh;
		}

	</style>

</head>
<body>

<div id="whole">

 <div class="header">


	<form align="right" name="form1" method="post" action="{{url_for('logout')}}">

		  <label class="logoutLblPos">


		  <button id="submit2"><b style="margin-top: -13px;">Log Out<b>&nbsp&nbsp&nbsp<img style="height: 20px;width: 20px;border-radius: 5px;" src="../static/images/logout.png"></button>

		  </label>

	</form>

 </div>


	<form>
		<div class="city">

			<div>

				<input type="text" id="list_item1" name = "txt1" placeholder="Enter city name" name="city" autocomplete="on">
				<button id="additem" type="button">Add City</button>
			
			</div>

			<div class="rem-city">

				<input type="text" id="list_item2" name = "txt2" placeholder="Enter city name" name="rem_city" autocomplete="on">
				<button id="removeitem" type="button">Remove City</button>

			</div>

		</div>

	</form>

		<br><br><br><br><br>

		<div class="buttons">

			<div class = "shw-btn">

				<button id="show-btn">Show items</button>

				<div id="output"></div>

			</div>

			<div class="clr-btn">
				<button id="clear-btn" >Clear All</button>
			</div>
		</div>

					<table id="cont" border="1px" style="border-collapse: collapse;">
					</table>
 <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>

 <input id="alwaysFetch" type="hidden" />
<script>
    setTimeout(function () {
        var el = document.getElementById('alwaysFetch');
        el.value = el.value ? location.reload() : true;
    }, 0);
</script>

	</div>

		
	<script type="text/javascript">

//	window.location.hash="no-back-button";
//	window.location.hash="Again-No-back-button";
//	window.onhashchange=function(){window.location.hash="no-back-button";}

var a ='2029faa3'

		// function aler() {
		// 	alert("Are you sure?");
		// }
	$(document).ready(function() {
	    $("#additem").click(function() {
	    	    var value = $("#list_item1").val();
	    	    var id = Cookies.get("persis_id")
	    	    place = {'place' : value, 'persis_id' : id};
	    	    console.log(place);
	           $.ajax({
	            type: 'POST',
	            url: "http://"+a+".ngrok.io/addElecPlace",
                contentType: 'application/json',
	            data : JSON.stringify(place),
	            success: function(result) {
	               document.getElementById("output").innerHTML = result;
	            }
	        });
	    });
	    $("#show-btn").click(function(){
	    	$.ajax({
	            type: 'GET',
	            url: "http://"+a+".ngrok.io/showElecPlace",
                contentType: 'JSON',
                // headers: {'x-my-custom-header':'mc'},
	            success: function(result) {
	            	// $("#cont").show();
                    var disp =document.getElementById("cont")
                    $("table#cont").empty();
                    var trh = document.createElement('tr');
                    var th = trh.appendChild(document.createElement('th'));
                    th.innerHTML = "Index";
                    var th = trh.appendChild(document.createElement('th'));
                    th.innerHTML = "Place"
                    disp.appendChild(trh);
                    for(var i = 0 ; i < result.length ; i++) {
                        var tr = document.createElement('tr');
                        var td = tr.appendChild(document.createElement('td'));
                        td.innerHTML = i + 1;
                        var td = tr.appendChild(document.createElement('td'));
                        td.innerHTML = result[i]['placeName'];
                        disp.appendChild(tr);
                    }
	            }

	            }
	        );
	    })
	    $("#removeitem").click(function(){
	    	var value = $("#list_item2").val();
	    	place = {'place' : value};
	    	$.ajax({
	            type: 'POST',
	            url: "http://"+a+".ngrok.io/remElecPlace",
                contentType: 'application/JSON',
                data: JSON.stringify(place),
                // headers: {'x-my-custom-header':'mc'},
	            success: function(result) {
	            	document.getElementById("output").innerHTML=result;
	            }
	    })
	});
	    $("#clear-btn").click(function(){
	    	$.ajax({
	            type: 'POST',
	            url: "http://"+a+".ngrok.io/clearPlace",
                contentType: 'application/JSON',
                // data: JSON.stringify(place),
                // headers: {'x-my-custom-header':'mc'},
	            success: function(result) {
	            	document.getElementById("output").innerHTML=result;
	            }
	    })
	});

})


	function activatePlacesSearch() {
		var input = document.getElementById("list_item1");
		var autocomplete = new google.maps.places.Autocomplete(input);

		var input2 = document.getElementById("list_item2");
		var autocomplete = new google.maps.places.Autocomplete(input2);
	}



</script>

<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkqBEmy8wmdJeUwjwUTUiBCieJ6o4LYNI&libraries=places&region=in&callback=activatePlacesSearch"></script>
</body>
</html>
